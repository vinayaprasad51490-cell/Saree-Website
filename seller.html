<!DOCTYPE html>
<html>
<head>
    <title>Seller Panel</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
        .form-box { background: white; padding: 20px; border-radius: 8px; max-width: 400px; margin-bottom: 20px; }
        input { width: 90%; padding: 10px; margin: 10px 0; }
        button { background: green; color: white; padding: 10px; cursor: pointer; border: none; width: 100%; border-radius: 5px; }
        .inventory-card { display: flex; align-items: center; justify-content: space-between; border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; background: white; border-radius: 8px; }
    </style>
</head>
<body>

    <button onclick="logout()" style="background: gray; color: white; border: none; padding: 8px 15px; cursor: pointer; float: right; border-radius: 4px;">
        Logout
    </button>

    <h1>Manage Your Store</h1>

    <div class="form-box">
        <input type="text" id="pName" placeholder="Product Name">
        <input type="number" id="originalPrice" placeholder="Original Price (MRP)">
        <input type="number" id="salePrice" placeholder="Sale Price (Discounted)">

        
        <select id="pCategory" style="width: 95%; padding: 10px; margin: 10px 0;">
            <option value="Silk">Silk Saree</option>
            <option value="Cotton">Cotton Saree</option>
            <option value="Designer">Designer Saree</option>
            <option value="Kurthis">Kurthi</option>
        </select>


        <label>Select Images:</label>
        <input type="file" id="pImages" multiple accept="image/*">
        <button onclick="addProduct()">Upload Product</button>
    </div>

    <a href="index.html">Go to Customer Shop Page ‚Üí</a>

    <hr>
    <h3>Your Current Inventory</h3>
    <div id="inventoryList"></div>

    <br><br>
    <button onclick="clearAllProducts()" style="background: black; color: white; padding: 10px; width: 200px; cursor: pointer; border: none; border-radius: 5px;">
        üóëÔ∏è Clear Entire Shop
    </button>

    
    <script src="app.js"></script>

    <script>
        // 1. Security Check
        if (sessionStorage.getItem("isLoggedIn") !== "true") {
            window.location.href = "login.html";
        }

        function logout() {
            sessionStorage.removeItem("isLoggedIn");
            window.location.href = "login.html";
        }

        // 2. THIS IS THE KEY FIX: Wrapping the code in a named function
        function displayInventory() {
            const inventoryDiv = document.getElementById("inventoryList");
            
            if (!products || products.length === 0) {
                inventoryDiv.innerHTML = "<p>Your shop is empty.</p>";
                return;
            }

            inventoryDiv.innerHTML = products.map(p => `
                <div class="inventory-card">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <img src="${p.images[0]}" style="width: 45px; height: 45px; object-fit: cover; border-radius: 4px;">
                        <div>
                            <b>${p.name}</b>
                            <div style="font-size: 12px; color: ${p.status === 'In Stock' ? 'green' : 'red'}; font-weight: bold;">
                                ${p.status}
                            </div>
                        </div>
                    </div>
                    <div>
                        <button onclick="toggleStatus(${p.id})" style="padding: 5px; cursor: pointer; font-size: 11px; width: auto; background: #eee; color: black;">
                            Status
                        </button>
                        <button onclick="deleteProduct(${p.id})" style="background: #ff4d4d; color: white; border: none; padding: 5px; cursor: pointer; font-size: 11px; margin-left: 5px; width: auto;">
                            Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // 3. Run when page loads
        window.onload = displayInventory;

        
    </script>
</body>
</html>